---
title: "Multiview embedding vs Time series vs. Regression predicting weather in Fresno"
author: "Luke Beebe"
output: html_notebook
---
```{r setup, include=TRUE, echo=TRUE}
library(tidyverse)
library(ggplot2)
library(gridExtra)
library(lars)
```

We will first load the data collected from multiple sources of the major weather predictors for Fresno.
MEI
PDO
IOD
AO1
PDO1
sunspot
PRCP
TAVG

```{r data1}
weather_data <- read.csv("/Users/lukebeebe/Documents/School/Rutgers/2024 Spring/Independent Study/HF_data.csv")
fresno <- weather_data[,-c(1,4,5,12,15)] # remove unnecessary columns
head(fresno)
```

According to the literature, weather is easier to predict when grouped into seasons. We will build a new dataset with the mean averages of each variable for each season of each year.

December, January, February are assigned 4 (Winter)
March, April, May are assigned 1 (Spring)
June, July, August are assigned 2 (Summer)
September, October, November are assigned 3 (Fall)

We will also round up the average year as not to confuse the winter season with the previous year. (December 1963 will be included with Winter 1964)

```{r data2}
season <- c(4,4,1,1,1,2,2,2,3,3,3,4)
fresno <- cbind(season, fresno)
fresno_season <- (fresno[1,]+fresno[2,])/2 # winter
fresno <- fresno[-c(1,2),]
for(m in 1:floor(length(fresno$year)/3)){
  season <- (fresno[1,]+fresno[2,]+fresno[3,])/3
  fresno_season <- rbind(fresno_season, season)
  fresno <- fresno[-c(1,2,3),]
}
fresno_season$year <- as.integer(ceiling(fresno_season$year))
fresno_season <- fresno_season[,-c(3)]
head(fresno_season)
```

Looks good! Now we can visualize it and see what the data looks like.

```{r data3}
ggplot(fresno_season, aes(x=year, y=F_TAVG)) + geom_line() +
  geom_smooth(linewidth=1, method='lm',se=F) + facet_wrap(~season, scales = "free_y")
```

Immediately, we see that the general trend is warmer and that it seems rather chaotic. 

